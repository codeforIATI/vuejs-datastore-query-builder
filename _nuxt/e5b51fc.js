(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{233:function(t,e,r){"use strict";r.r(e);r(5),r(2),r(10),r(4),r(9),r(54);var o=r(16),n=(r(84),r(85),r(28)),c=(r(3),r(1),r(155),r(0)),l=r(65);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var f={data:function(){return{busy:!0,healthData:{indexed_activities:0,indexed_transactions:0,ok:null,status:null,status_data:{last_fetch:null,last_parsed:null,last_successful_fetch:null}},filters:{"reporting-org":[],"reporting-org.type":[],"recipient-country":[],"recipient-region":[],sector:[],"start-date__lt":null,"start-date__gt":null,"end-date__lt":null,"end-date__gt":null},codelists:{Country:[],Region:[],Sector:[],OrganisationType:[],ReportingOrg:[]},format:"activity",formatOptions:[{value:"activity",text:"One activity per row",description:"Each row contains a unique activity. Financial information is aggregated. Budget information is excluded. Other potentially repeating fields (such as sectors) are reported in a single cell, delimited by semi-colons."},{value:"transaction",text:"One transaction per row",description:"Each row contains a unique financial transaction. The parent activity identifier and other activity-level fields are repeated for each transaction.<br/>If you are looking to analyse activity finances by year you need to select “Transactions” and calculate the year from the transaction date."},{value:"budget",text:"One budget per row",description:"Each row contains a budget-period entry. Transaction data is not included. The parent activity identifier and other activity-level fields are repeated for each budget line."}],grouping:"",groupingOptions:[{value:"",text:"No",description:"Information is not disaggregated."},{value:"/by_sector",text:"Multi-sector expansion",description:"Each Activity, Transaction or Budget row is repeated for each separate Sector reported. The corresponding percentage for the sector split is reported in a separate column. This allows you to easily add arithmetic to your spreadsheet to calculate values proportionately."},{value:"/by_country",text:"Multi-country expansion",description:"Each Activity, Transaction or Budget row is repeated for each separate Country reported. The corresponding percentage for the sector split is reported in a separate column. This allows you to easily add arithmetic to your spreadsheet to calculate values proportionately."}],stream:!1,streamOptions:[{value:!1,text:"50 rows",description:"Preview your selection by viewing only the first 20 rows of data."},{value:!0,text:"Entire selection",description:"Preview your selection by viewing only the first 20 rows of data."}],codelistURLs:["Country","Region","Sector","OrganisationType"],baseURL:"https://datastore.codeforiati.org/api/1/access/"}},components:{},computed:{urlQuery:function(){var t=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.urlQueryFilters);return this.grouping&&""!=this.grouping&&(t.grouping=this.grouping),this.stream&&1==this.stream&&(t.stream=this.stream),this.format&&"activity"!=this.format&&(t.format=this.format),t},urlQueryFilters:function(){var t={};return Object.entries(this.filters).forEach((function(e){null!=e[1]&&e[1].length>0&&("object"==Object(n.a)(e[1])&&null!=e[1]?t[e[0]]=e[1].join("|"):t[e[0]]=e[1])})),t},filteredReportingOrganisations:function(){var t=this;return 0==this.filters["reporting-org.type"].length?this.codelists.ReportingOrg:this.codelists.ReportingOrg.filter((function(e){return t.filters["reporting-org.type"].includes(e.type)}))},queryLink:function(){var t=Object.entries(this.urlQueryFilters).map((function(t){return"".concat(t[0],"=").concat(t[1])})).join("&"),e=t.length>0?"?".concat(t):"",r=1==this.stream?"&stream=True":"";return"".concat(this.baseURL).concat(this.format).concat(this.grouping,".csv").concat(e).concat(r)}},methods:{copyLink:function(){var t=this;navigator.clipboard.writeText(this.queryLink),this.$root.$emit("bv::show::tooltip","query-link-copy-tooltip");setTimeout((function(){t.$root.$emit("bv::hide::tooltip","query-link-copy-tooltip")}),1e3)},formatNumber:function(t){return parseFloat(t).toLocaleString()},reset:function(){this.filters={}},loadHealthData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.get)("https://datastore.codeforiati.org/api/1/about").then((function(e){t.healthData=e.data}));case 2:t.busy=!1;case 3:case"end":return e.stop()}}),e)})))()},loadData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.codelistURLs.forEach((function(e){Object(l.get)("https://codelists.codeforiati.org/api/json/en/".concat(e,".json")).then((function(r){t.codelists[e]=r.data.data.map((function(t){return{code:t.code,label:"".concat(t.code," - ").concat(t.name)}}))}))})),Object(l.get)("https://codeforiati.org/vuejs-datastore-query-builder/publishers.json").then((function(e){t.codelists.ReportingOrg=e.data.data.map((function(t){return{code:t.code,label:"".concat(t.code," - ").concat(t.label),type:t.type}}))}));case 2:case"end":return e.stop()}}),e)})))()},updateParams:function(){this.$router.push({query:this.urlQuery})},setupFilters:function(){var t=this;Object.keys(this.$route.query).forEach((function(e){e in t.filters?"object"==Object(n.a)(t.filters[e])&&null!=t.filters[e]?t.filters[e]=t.$route.query[e].split("|"):t.filters[e]=t.$route.query[e]:"grouping"==e?t.grouping=t.$route.query[e]:"stream"==e?t.stream=!0:"format"==e&&(t.format=t.$route.query[e])}))}},watch:{filters:{deep:!0,handler:function(t){this.updateParams()}},grouping:{handler:function(t){this.updateParams()}},stream:{handler:function(t){this.updateParams()}},format:{handler:function(t){this.updateParams()}}},mounted:function(){this.loadHealthData(),this.loadData(),this.setupFilters()}},h=r(50),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-container",{staticClass:"bg-dark ml-0 mr-0",attrs:{fluid:""}},[r("b-jumbotron",{staticClass:"mb-0 mt-2 text-center",attrs:{header:"IATI Datastore Classic",lead:"The classic version of the IATI Datastore, reloaded.","bg-variant":"dark","text-variant":"light"}},[r("b-container",[t.busy?[r("b-spinner",{attrs:{label:"Checking health...",variant:"secondary"}}),t._v(" "),r("br"),t._v(" "),r("p",{staticClass:"text-center"},[t._v("Checking Datastore status...")])]:[r("p",{staticClass:"lead"},[t._v("\n            Access "),r("code",[t._v(t._s(t.formatNumber(t.healthData.indexed_activities)))]),t._v(" activities and "),r("code",[t._v(t._s(t.formatNumber(t.healthData.indexed_transactions)))]),t._v(" transactions.\n          ")]),t._v(" "),r("hr"),t._v(" "),r("h5",[r("b-row",[1==t.healthData.ok?r("b-col",{staticClass:"bg-success p-2",attrs:{md:"6"}},[t._v("\n                Datastore fully operational\n              ")]):r("b-col",{staticClass:"bg-danger p-2",attrs:{md:"6"}},[t._v("\n                  Datastore has some problems\n              ")]),t._v(" "),r("b-col",{staticClass:"bg-secondary p-2",attrs:{md:"6"}},[t._v("\n                Last updated "+t._s(t.healthData.status_data.last_parsed)+"\n              ")])],1)],1)],t._v(" "),r("hr"),t._v(" "),r("b-row",[r("b-col",[r("b-btn",{attrs:{href:"https://datastore.codeforiati.org/docs/",variant:"primary"}},[t._v("View documentation")]),t._v(" "),r("b-btn",{attrs:{href:"https://datastore.codeforiati.org/api/",variant:"warning"}},[t._v("View API")])],1)],1)],2)],1)],1),t._v(" "),r("b-container",{staticClass:"bg-light p-4"},[r("b-row",[r("b-col",[r("h1",[t._v("\n          Get the data\n        ")]),t._v(" "),r("p",[t._v("You can obtain data from "),r("a",{attrs:{href:"https://datastore.codeforiati.org/"}},[t._v("IATI Datastore Classic")]),t._v(" in various formats.")]),t._v(" "),r("p",[t._v("You can choose to filter based on which organisation is reporting the information, where the activity is happening, and the activity's sector. You can choose to output individual activities, transactions or budgets.")])])],1),t._v(" "),r("b-row",[r("b-col",[r("h2",[t._v("Choose your filters")]),t._v(" "),r("p",[t._v("These options let you filter IATI data, depending on what you are looking for. Additional filters "),r("a",{attrs:{href:"https://datastore.codeforiati.org/docs/api/#filtering"}},[t._v("are available")]),t._v(" by querying the datastore directly.")]),t._v(" "),r("b-card",{staticClass:"mb-3",attrs:{header:"Reporting Organisation","header-tag":"h4"}},[r("b-card-text",[t._v("\n            The reporting organisation is the publisher of the IATI data.\n          ")]),t._v(" "),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Reporting Organisation Type",description:"All types of publishers (e.g. Governments)."}},[r("v-select",{attrs:{options:t.codelists.OrganisationType,placeholder:"All types of reporting organisation",reduce:function(t){return t.code},multiple:""},model:{value:t.filters["reporting-org.type"],callback:function(e){t.$set(t.filters,"reporting-org.type",e)},expression:"filters['reporting-org.type']"}})],1)],1),t._v(" "),r("b-col",[r("b-form-group",{attrs:{label:"Reporting Organisation",description:"Select only a particular publisher's data (e.g. DFID)."}},[r("v-select",{attrs:{options:t.filteredReportingOrganisations,placeholder:"All reporting organisations",reduce:function(t){return t.code},multiple:""},model:{value:t.filters["reporting-org"],callback:function(e){t.$set(t.filters,"reporting-org",e)},expression:"filters['reporting-org']"}})],1)],1)],1)],1),t._v(" "),r("b-card",{staticClass:"mb-3",attrs:{header:"Sector","header-tag":"h4"}},[r("b-form-group",{attrs:{label:"Sector",description:"Choose the sector or sectors you are looking for."}},[r("v-select",{attrs:{options:t.codelists.Sector,placeholder:"All sectors",reduce:function(t){return t.code},multiple:""},model:{value:t.filters.sector,callback:function(e){t.$set(t.filters,"sector",e)},expression:"filters['sector']"}})],1),t._v(" "),r("b-alert",{attrs:{variant:"info",show:""}},[t._v("\n            For more details of the sectors, see the "),r("a",{attrs:{href:"https://codelists.codeforiati.org/Sector",rel:"noopener noreferrer",target:"_blank"}},[t._v("DAC 5 Digit Sector")]),t._v(" codelist.\n          ")])],1),t._v(" "),r("b-card",{staticClass:"mb-3",attrs:{header:"Recipient location","header-tag":"h4"}},[r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Recipient country"}},[r("v-select",{attrs:{options:t.codelists.Country,placeholder:"All recipient countries",reduce:function(t){return t.code},multiple:""},model:{value:t.filters["recipient-country"],callback:function(e){t.$set(t.filters,"recipient-country",e)},expression:"filters['recipient-country']"}})],1)],1),t._v(" "),r("b-col",[r("b-form-group",{attrs:{label:"Recipient region"}},[r("v-select",{attrs:{options:t.codelists.Region,placeholder:"All recipient regions",reduce:function(t){return t.code},multiple:""},model:{value:t.filters["recipient-region"],callback:function(e){t.$set(t.filters,"recipient-region",e)},expression:"filters['recipient-region']"}})],1)],1)],1),t._v(" "),r("b-alert",{attrs:{variant:"warning",show:t.filters["recipient-country"].length>0&&t.filters["recipient-region"].length>0}},[t._v("\n            Choosing a region and a country will likely not return data as most publishers publish either a country or a region.\n          ")])],1),t._v(" "),r("b-card",{staticClass:"mb-3",attrs:{header:"Dates","header-tag":"h4"}},[r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Start date (after)"}},[r("b-form-datepicker",{model:{value:t.filters["start-date__gt"],callback:function(e){t.$set(t.filters,"start-date__gt",e)},expression:"filters['start-date__gt']"}})],1)],1),t._v(" "),r("b-col",[r("b-form-group",{attrs:{label:"Start date (before)"}},[r("b-form-datepicker",{model:{value:t.filters["start-date__lt"],callback:function(e){t.$set(t.filters,"start-date__lt",e)},expression:"filters['start-date__lt']"}})],1)],1)],1),t._v(" "),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"End date (after)"}},[r("b-form-datepicker",{model:{value:t.filters["end-date__gt"],callback:function(e){t.$set(t.filters,"end-date__gt",e)},expression:"filters['end-date__gt']"}})],1)],1),t._v(" "),r("b-col",[r("b-form-group",{attrs:{label:"End date (before)"}},[r("b-form-datepicker",{model:{value:t.filters["end-date__lt"],callback:function(e){t.$set(t.filters,"end-date__lt",e)},expression:"filters['end-date__lt']"}})],1)],1)],1)],1),t._v(" "),r("h3",[t._v("How would you like to view this information?")]),t._v(" "),r("p",[t._v("These options allow you to configure the way in which your data is disaggregated, making different sorts of analysis possible.")]),t._v(" "),r("b-row",[r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Choose format"}},[r("b-radio-group",{attrs:{stacked:"",options:t.formatOptions},model:{value:t.format,callback:function(e){t.format=e},expression:"format"}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Repeat rows"}},[r("b-radio-group",{attrs:{stacked:"",options:t.groupingOptions},model:{value:t.grouping,callback:function(e){t.grouping=e},expression:"grouping"}})],1)],1),t._v(" "),r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Choose sample size"}},[r("b-radio-group",{attrs:{stacked:"",options:t.streamOptions},model:{value:t.stream,callback:function(e){t.stream=e},expression:"stream"}})],1)],1)],1),t._v(" "),r("hr"),t._v(" "),r("b-row",{staticClass:"mb-2"},[r("b-col",[r("b-btn",{attrs:{variant:"primary",value:"Download",href:t.queryLink}},[t._v("Download")]),t._v(" "),r("b-btn",{attrs:{variant:"secondary",value:"Reset"},on:{click:t.reset}},[t._v("Reset")])],1)],1),t._v(" "),r("b-row",[r("b-col",[r("b-alert",{attrs:{variant:"success",show:""}},[r("strong",[t._v("Your link:")]),t._v(" "),r("b-input-group",[r("b-input",{attrs:{type:"plaintext",value:t.queryLink,id:"query-link"}}),t._v(" "),r("b-input-group-append",[r("b-btn",{attrs:{variant:"secondary",id:"query-link-copy"},on:{click:t.copyLink}},[t._v("Copy")])],1)],1),t._v(" "),r("b-tooltip",{ref:"tooltip",attrs:{disabled:"",id:"query-link-copy-tooltip",target:"query-link-copy"}},[t._v("\n                Copied!\n              ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);